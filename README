Arduino the Unix way
--------------------

Compiles and installs the Arduino source files and standard libraries as Unix
library archive files, together with header files.

In addition the rules for building an Arduino application has been offloaded
into an external makefile (inc.mk). The "Makefile" needed for an Arduino project
can thus be reduced to a few lines. An example:

    TARGET = blink
    SRCS   = blink.ino

    include /usr/local/lib/arduino/inc.mk

If the project requires additional libraries these can be added to the build
using the DEPS variable, e.g. with adding the line:

    DEPS   = SPI Ethernet

(in the above case the "SPI" and "Ethernet" libraries are added to the build).

Prerequisites:

    # apt-get install gcc-avr
    # apt-get install avr-libc
    # apt-get install avrdude

(Uses the standard 'avrdude' rather that the version that comes with Arduino.)

Build and install:

    $ wget http://arduino.googlecode.com/files/arduino-1.0.1-linux.tgz
    $ tar zxf arduino-1.0.1-linux.tgz
    $ ./conv.sh ./arduino-1.0.1/hardware/arduino/boards.txt
    $ ./build.sh

Will install the Arduino "core", the "inc.mk" makefile, the converted 'board'
configuration files and the standard libraries, for all the boards defined in
the "boards.txt" file.

Configurations for additional boards can be added by running the "conv.sh"
script with the "boards.txt" file for the additional boards as parameter. For
example for the Sanguino board (http://sanguino.cc/):

    $ wget http://sanguino.googlecode.com/files/Sanguino-0023r4.zip
    $ unzip Sanguino-0023r4.zip
    $ ./conv.sh Sanguino/boards.txt

(Remember to run the "build.sh" script to actually compile libraries for the
added boards.)

The default installation directory is "/usr/local/include/arduino" for header
files and "/usr/local/lib/arduino' for libraries and support files.

By default an Arduino project will be built for the "atmega328" (Duemilanove
and similar) board, which has the following parameters set:

    PROTOCOL = arduino
    MAXIMUM_SIZE = 30720
    SPEED = 57600
    MCU = atmega328p
    F_CPU = 16000000L
    CORE = arduino
    VARIANT = standard

If the build should be for a different board, for example for the "Leonardo" board, add
the "BOARD=leonardo" as parameter to the "make" command. Example:

    $ make BOARD=leonardo

Similarily builds can be done for other boards. For an overview over boards
supported, look in the "/usr/local/lib/arduino/boards" directory. It contains
one configuration file for each board supported.

Default board can be set by updating the line

    BOARD  := atmega328

at the top of the the "/usr/local/lib/arduino/inc.mk" file.


2012-07-05  <kmyksvo(at)online.no>
