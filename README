Arduino the Unix way
--------------------

Compiles and installs the Arduino source files and standard libraries as Unix
library archive files, together with header files.

In addition the rules for building an Arduino application is offloaded into an
external makefile (inc.mk). The 'Makefile' needed in a project can thus be
reduced to a few lines. An example:

    TARGET = blink
    SRCS   = blink.ino

    include /usr/local/lib/arduino/inc.mk

If the project requires additional libraries these can be added to the build
using the DEPS variable, e.g. with adding the line:

    DEPS   = SPI Ethernet

(in the above case the "SPI" and "Ethernet" libraries are added to the build).

Prerequisites:

    # apt-get install gcc-avr
    # apt-get install avr-libc
    # apt-get install avrdude

(Uses the standard 'avrdude' rather that the version that comes with Arduino.)

Build and install:

    $ wget http://arduino.googlecode.com/files/arduino-1.0.1-linux.tgz
    $ tar zxf arduino-1.0.1-linux.tgz
    $ make -f core.mk install
    $ make -f core.mk install_mk
    $ make -f library.mk install NAME=EEPROM
    $ make -f library.mk install NAME=SPI
    $ make -f library.mk install NAME=Ethernet DEPS=SPI
    $ make -f library.mk install NAME=Firmata
    $ make -f library.mk install NAME=LiquidCrystal
    $ make -f library.mk install NAME=SD
    $ make -f library.mk install NAME=Servo
    $ make -f library.mk install NAME=SoftwareSerial
    $ make -f library.mk install NAME=Stepper
    $ make -f library.mk install NAME=Wire

Installs the Arduino "core", the "inc.mk" makefile and the standard libraries.
(Note that the "Ethernet" library depends on that the "SPI" library has already
been installed.)

The above lines builds for the standard "Uno" board, e.g. with the parameters:

   MCU     = atmega328p
   F_CPU   = 16000000L
   CORE    = arduino
   VARIANT = standard

Builds for boards can be done by overriding the parameters with appropiate
values. (See the "board.txt" file in the Arduino distribution for correct
combinations.)

(With Arduino ver. 1.0.1 the paramters "USB_VID" and "USB_PID" are introduced,
for use with the atmega32u4 processor.  Currently only the core build for the
"Leonardo" board uses these two variables.)

If an installation for all board types is desired, this can be done by running
the "build.sh" script:

    $ ./build.sh

which will install the Arduino core and standard libraries for all boards.

Usage:

  See in the './example' directory for an example 'Makefile'.

  Important! Make sure that the line

      #include <Arduino.h>

  is added to the top of your '*.ino' (or .pde) files. This is the only change
  that is needed to the source files.

  Default board paramters are for the "Uno" board (see above). If the build is
  for a different board, then the parameters:

      MCU, F_CPU, CORE and VARIANT

  must be overridden with correct values in the projects Makefile. (See the
  "board.txt" file in the Arduino distribution for correct value combinations.)

  The "avrdude" upload protocol, speed and port are by default set to:

      PROGRAMMER  = arduino
      UPLOAD_RATE = 115200
      PORT        = /dev/ttyUSB0

  Override as appropriate.

2012-01-01  <kmyksvo(at)online.no>
